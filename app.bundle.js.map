{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./app.js","webpack:///./src/back/config/dev.js","webpack:///./src/back/config/index.js","webpack:///./src/back/controller/message.js","webpack:///./src/back/controller/project.js","webpack:///./src/back/controller/user.js","webpack:///./src/back/model/message.js","webpack:///./src/back/model/project.js","webpack:///./src/back/model/user.js","webpack:///./src/back/route/index.js","webpack:///./src/back/route/message.js","webpack:///./src/back/route/project.js","webpack:///./src/back/route/user.js","webpack:///./src/back/service/auth.js","webpack:///./src/back/service/query.js","webpack:///external \"bcryptjs\"","webpack:///external \"bluebird\"","webpack:///external \"body-parser\"","webpack:///external \"compression\"","webpack:///external \"cookie-session\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///external \"express\"","webpack:///external \"fs-extra\"","webpack:///external \"jsonwebtoken\"","webpack:///external \"jwt-decode\"","webpack:///external \"lodash\"","webpack:///external \"mongoose\"","webpack:///external \"mongoose-slug-updater\"","webpack:///external \"multer\"","webpack:///external \"passport\"","webpack:///external \"passport-jwt\"","webpack:///external \"path\""],"names":["dotenv","config","mongoose","Promise","bluebird","connect","database","useCreateIndex","useNewUrlParser","connection","on","console","log","error","app","express","port","process","env","PORT","use","compression","level","cors","bodyParser","json","urlencoded","extended","cookieSession","maxAge","keys","secret","passport","initialize","session","auth","route","static","path","join","__dirname","get","req","res","sendFile","listen","result","require","default","listMessage","query","Message","find","exec","err","returnQuery","addMessage","body","title","author","email","content","newMessage","save","viewMessage","slug","params","findOne","deleteMessage","findOneAndDelete","getUser","Project","findById","populate","user","listProject","addProject","live","source","usedTool","usedSkill","introduction","thumbnailFilter","_","filter","files","o","fieldname","wireframeFilter","sitemapFilter","thumbnail","map","filename","wireframe","sitemap","usedToolCompact","text","usedSkillCompact","profile","jwtDecode","newProject","_id","uploadAdapter","ckEditorImageFilter","ckEditorImage","status","success","url","viewProject","editProject","tags","description","_user","findOneAndUpdate","deleteProject","registerUser","name","password","newUser","User","bcryptjs","hash","msg","debug","loginUser","userFound","compare","isMatch","token","jwt","sign","toJSON","expiresIn","id","admin","deleteUser","remove","plugin","messageSchema","Schema","type","String","required","message","model","projectSchema","Array","Types","ObjectId","ref","post","doc","findByIdAndUpdate","$push","project","$pull","userSchema","unique","virtual","length","deleteMany","$in","router","Router","authenticate","delete","storage","multer","diskStorage","destination","file","cb","folder","fs","ensureDir","then","catch","Date","now","originalname","upload","any","put","opts","jwtFromRequest","ExtractJwt","fromAuthHeaderAsBearerToken","secretOrKey","Strategy","jwtPayload","done"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./app.js\");\n","import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport cors from 'cors';\r\nimport path from 'path';\r\nimport compression from 'compression';\r\nimport passport from 'passport';\r\nimport cookieSession from 'cookie-session';\r\nimport bluebird from 'bluebird';\r\nimport mongoose from 'mongoose';\r\nimport dotenv from 'dotenv';\r\n\r\nimport config from './src/back/config';\r\nimport auth from './src/back/service/auth';\r\nimport route from './src/back/route';\r\n\r\ndotenv.config();\r\n\r\nmongoose.Promise = bluebird;\r\nmongoose.connect(config.database, {\r\n  useCreateIndex: true,\r\n  useNewUrlParser: true,\r\n});\r\nmongoose.connection.on('connected', () => {\r\n  console.log('Connected to database');\r\n});\r\nmongoose.connection.on('error', (error) => {\r\n  console.log(error);\r\n});\r\n\r\nconst app = express();\r\nconst port = process.env.PORT || 3000;\r\n\r\napp.use(compression({ level: 9 }));\r\napp.use(cors());\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(cookieSession({\r\n  maxAge: 24 * 60 * 60 * 1000 * 12,\r\n  keys: [config.secret],\r\n}));\r\napp.use(passport.initialize());\r\napp.use(passport.session());\r\n\r\nauth(passport);\r\n\r\napp.use('/api', route);\r\n\r\napp.use(express.static(path.join(__dirname, 'public')));\r\n\r\napp.get('*', (req, res) => {\r\n  res.sendFile(path.join(__dirname, 'index.html'));\r\n});\r\napp.listen(port, () => {\r\n  console.log('Server Started');\r\n});\r\n","export default {\r\n  database: 'mongodb://localhost:27017/portfolio',\r\n  secret: 'Godisagirl2012',\r\n};\r\n","let result;\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  result = require('./prod');\r\n} else {\r\n  result = require('./dev');\r\n}\r\n\r\nexport default result.default;\r\n","import returnQuery from '../service/query';\r\nimport Message from '../model/message';\r\n\r\nconst listMessage = (req, res) => {\r\n  const query = Message.find({});\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst addMessage = (req, res) => {\r\n  const {\r\n    title, author, email, content,\r\n  } = req.body;\r\n\r\n  const newMessage = new Message({\r\n    title,\r\n    author,\r\n    email,\r\n    content,\r\n  });\r\n\r\n  newMessage.save((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst viewMessage = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const query = Message.findOne({ slug });\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst deleteMessage = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const query = Message.findOneAndDelete({ slug });\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nexport {\r\n  listMessage,\r\n  addMessage,\r\n  viewMessage,\r\n  deleteMessage,\r\n};\r\n","import jwtDecode from 'jwt-decode';\r\nimport _ from 'lodash';\r\n\r\nimport returnQuery from '../service/query';\r\nimport Project from '../model/project';\r\n\r\nconst getUser = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const query = Project.findById({ slug }).populate('user');\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result.user, res);\r\n  });\r\n};\r\n\r\nconst listProject = (req, res) => {\r\n  const query = Project.find({});\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst addProject = (req, res) => {\r\n  const {\r\n    title, live, source, usedTool, usedSkill, introduction, content,\r\n  } = req.body;\r\n\r\n  const thumbnailFilter = _.filter(req.files, o => o.fieldname === 'thumbnail');\r\n  const wireframeFilter = _.filter(req.files, o => o.fieldname === 'wireframe');\r\n  const sitemapFilter = _.filter(req.files, o => o.fieldname === 'sitemap');\r\n\r\n  const thumbnail = thumbnailFilter.map(({ filename }) => filename);\r\n  const wireframe = wireframeFilter.map(({ filename }) => filename);\r\n  const sitemap = sitemapFilter.map(({ filename }) => filename);\r\n\r\n  const usedToolCompact = usedTool.map(({ text }) => text);\r\n  const usedSkillCompact = usedSkill.map(({ text }) => text);\r\n\r\n  const profile = jwtDecode(req.get('Authorization'));\r\n  const newProject = new Project({\r\n    title,\r\n    thumbnail,\r\n    live,\r\n    source,\r\n    usedTool: usedToolCompact,\r\n    usedSkill: usedSkillCompact,\r\n    wireframe,\r\n    sitemap,\r\n    introduction,\r\n    content,\r\n    user: profile._id,\r\n  });\r\n\r\n  newProject.save((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst uploadAdapter = (req, res) => {\r\n  const ckEditorImageFilter = _.filter(req.files, o => o.fieldname === 'ckeditor_image');\r\n  const ckEditorImage = ckEditorImageFilter.map(({ filename }) => filename);\r\n  res.status(200).json({ success: true, url: `img/${ckEditorImage}` });\r\n};\r\n\r\nconst viewProject = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const query = Project.findOne({ slug });\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst editProject = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const {\r\n    title, tags, description, _user,\r\n  } = req.body;\r\n  const query = Project.findOneAndUpdate({ slug }, {\r\n    title, tags, description, _user,\r\n  });\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nconst deleteProject = (req, res) => {\r\n  const {\r\n    slug,\r\n  } = req.params;\r\n  const query = Project.findOneAndDelete({ slug });\r\n  query.exec((err, result) => {\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nexport {\r\n  listProject,\r\n  addProject,\r\n  uploadAdapter,\r\n  viewProject,\r\n  editProject,\r\n  deleteProject,\r\n  getUser,\r\n};\r\n","import jwt from 'jsonwebtoken';\r\nimport bcryptjs from 'bcryptjs';\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nimport User from '../model/user';\r\nimport config from '../config';\r\nimport returnQuery from '../service/query';\r\n\r\nconst registerUser = (req, res) => {\r\n  const {\r\n    name, email, password,\r\n  } = req.body;\r\n  const newUser = new User({\r\n    name,\r\n    email,\r\n    password,\r\n  });\r\n  bcryptjs.hash(newUser.password, 10, (err, hash) => {\r\n    newUser.password = hash;\r\n    newUser.save((error) => {\r\n      if (error) {\r\n        res.json({ success: false, msg: 'Failed to create user', debug: err });\r\n      } else {\r\n        res.json({ success: true, msg: 'Created user' });\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst loginUser = (req, res) => {\r\n  const { email, password } = req.body;\r\n  User.findOne({ email }, (err, userFound) => {\r\n    if (err) throw err;\r\n    if (!userFound) {\r\n      return res.json({ success: false, msg: 'User not found' });\r\n    }\r\n    bcryptjs.compare(password, userFound.password, (err, isMatch) => {\r\n      if (err) throw err;\r\n      if (isMatch) {\r\n        const token = jwt.sign(userFound.toJSON(), config.secret, {\r\n          expiresIn: 604800,\r\n        });\r\n        res.json({\r\n          success: true,\r\n          msg: 'User found',\r\n          token: `Bearer ${token}`,\r\n          user: {\r\n            id: userFound._id,\r\n            name: userFound.name,\r\n            email: userFound.email,\r\n            admin: userFound.admin,\r\n          },\r\n        });\r\n      } else {\r\n        return res.json({ success: false, msg: 'Wrong password' });\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst deleteUser = (req, res) => {\r\n  const profile = jwtDecode(req.get('Authorization'));\r\n  User.findById(profile._id).exec((err, result) => {\r\n    result.remove();\r\n    returnQuery(err, result, res);\r\n  });\r\n};\r\n\r\nexport {\r\n  registerUser,\r\n  loginUser,\r\n  deleteUser,\r\n};\r\n","import mongoose from 'mongoose';\r\nimport slug from 'mongoose-slug-updater';\r\n\r\nmongoose.plugin(slug);\r\n\r\nconst messageSchema = mongoose.Schema({\r\n  title: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  author: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  content: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  slug: {\r\n    type: String,\r\n    slug: 'title',\r\n  },\r\n});\r\n\r\nconst message = mongoose.model('Message', messageSchema);\r\nexport default message;\r\n","import mongoose from 'mongoose';\r\nimport slug from 'mongoose-slug-updater';\r\n\r\nmongoose.plugin(slug);\r\n\r\nconst projectSchema = mongoose.Schema({\r\n  title: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  thumbnail: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  live: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  source: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  usedTool: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  usedSkill: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  wireframe: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  sitemap: {\r\n    type: Array,\r\n    required: true,\r\n  },\r\n  introduction: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  content: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  slug: {\r\n    type: String,\r\n    slug: 'title',\r\n  },\r\n  user: {\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'User',\r\n    required: true,\r\n  },\r\n});\r\n\r\nprojectSchema.post('save', (doc) => {\r\n  const User = mongoose.model('User');\r\n  User.findByIdAndUpdate(doc.user, { $push: { project: doc._id } }).exec();\r\n});\r\n\r\nprojectSchema.post('remove', (doc) => {\r\n  const User = mongoose.model('User');\r\n  User.findByIdAndUpdate(doc.user, { $pull: { project: doc._id } }).exec();\r\n});\r\n\r\nconst project = mongoose.model('Project', projectSchema);\r\nexport default project;\r\n","import mongoose from 'mongoose';\r\n\r\nconst userSchema = mongoose.Schema({\r\n  name: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  email: {\r\n    type: String,\r\n    required: true,\r\n    unique: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  project: [{\r\n    type: mongoose.Schema.Types.ObjectId,\r\n    ref: 'Project',\r\n  }],\r\n});\r\n\r\nuserSchema.virtual('projectCount').get(function () {\r\n  return this.project.length;\r\n});\r\n\r\nuserSchema.post('remove', (doc) => {\r\n  const Project = mongoose.model('Project');\r\n  Project.deleteMany({ _id: { $in: doc.project } }).exec();\r\n});\r\n\r\nconst user = mongoose.model('User', userSchema);\r\nexport default user;\r\n","import express from 'express';\r\n\r\nimport user from './user';\r\nimport project from './project';\r\nimport message from './message';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.use('/user', user);\r\nrouter.use('/project', project);\r\nrouter.use('/message', message);\r\n\r\nexport default router;\r\n","import express from 'express';\r\nimport passport from 'passport';\r\n\r\nimport {\r\n  listMessage, addMessage, viewMessage, deleteMessage,\r\n} from '../controller/message';\r\n\r\nconst router = express.Router();\r\n\r\nrouter.route('/')\r\n  .get(passport.authenticate('jwt', { session: false }), listMessage)\r\n  .post(addMessage);\r\n\r\nrouter.route('/:slug')\r\n  .get(passport.authenticate('jwt', { session: false }), viewMessage)\r\n  .delete(passport.authenticate('jwt', { session: false }), deleteMessage);\r\n\r\nexport default router;\r\n","import express from 'express';\r\nimport passport from 'passport';\r\nimport multer from 'multer';\r\nimport fs from 'fs-extra';\r\n\r\nimport {\r\n  listProject, addProject, viewProject, editProject, deleteProject, getUser, uploadAdapter,\r\n} from '../controller/project';\r\n\r\nconst storage = multer.diskStorage({\r\n  destination: (req, file, cb) => {\r\n    const folder = 'public/img/';\r\n    fs.ensureDir(folder)\r\n      .then(() => {\r\n        cb(null, folder);\r\n      })\r\n      .catch(() => {\r\n        cb(null, folder);\r\n      });\r\n  },\r\n  filename: (req, file, cb) => {\r\n    cb(null, `${Date.now()}${file.originalname}`);\r\n  },\r\n});\r\nconst upload = multer({ storage });\r\n\r\nconst router = express.Router();\r\n\r\nrouter.route('/')\r\n  .get(listProject)\r\n  .post(passport.authenticate('jwt', { session: false }), upload.any(), addProject);\r\n\r\nrouter.post('/uploadadapter', passport.authenticate('jwt', { session: false }), upload.any(), uploadAdapter);\r\n\r\nrouter.route('/:slug')\r\n  .get(viewProject)\r\n  .put(passport.authenticate('jwt', { session: false }), editProject)\r\n  .delete(passport.authenticate('jwt', { session: false }), deleteProject);\r\n\r\nrouter.get('/:slug/user', passport.authenticate('jwt', { session: false }), getUser);\r\nexport default router;\r\n","import express from 'express';\r\nimport passport from 'passport';\r\nimport { registerUser, loginUser, deleteUser } from '../controller/user';\r\n\r\nconst router = express.Router();\r\n\r\n// router.post('/register', registerUser); Disable\r\nrouter.post('/login', loginUser);\r\n// router.delete('/', passport.authenticate('jwt', { session: false }), deleteUser); // Disable\r\n\r\nexport default router;\r\n","import { Strategy, ExtractJwt } from 'passport-jwt';\r\n\r\nimport User from '../model/user';\r\nimport config from '../config';\r\n\r\nexport default (passport) => {\r\n  const opts = {\r\n    jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n    secretOrKey: config.secret,\r\n  };\r\n  passport.use(new Strategy(opts, (jwtPayload, done) => {\r\n    User.findById(jwtPayload._id, (err, user) => {\r\n      if (err) {\r\n        return done(err, false);\r\n      }\r\n      if (user) {\r\n        return done(null, user);\r\n      }\r\n      return done(null, false);\r\n    });\r\n  }));\r\n};\r\n","const returnQuery = (err, result, res) => {\r\n  if (err) {\r\n    res.status(400).json({ success: false, msg: 'Something wrong', debug: err });\r\n  } else {\r\n    res.json({ success: true, msg: result });\r\n  }\r\n};\r\nexport default returnQuery;\r\n","module.exports = require(\"bcryptjs\");","module.exports = require(\"bluebird\");","module.exports = require(\"body-parser\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-session\");","module.exports = require(\"cors\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"fs-extra\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"jwt-decode\");","module.exports = require(\"lodash\");","module.exports = require(\"mongoose\");","module.exports = require(\"mongoose-slug-updater\");","module.exports = require(\"multer\");","module.exports = require(\"passport\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"path\");"],"sourceRoot":""}